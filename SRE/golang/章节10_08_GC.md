### 一、GC

***

* GC英文全称 garbage collector
* GO语言GC改进了很多
* 一些常用的GC算法
  * 引用计算法，当对象被引用时计算器加一，不被引用时计数器减一
    * PHP和Object-C使用
    * 相互引用时无法回收
    * 技术增加消耗
  * Mark And Sweep标记和清除算法，停止程序运行，递归遍历对象，进行标记，标记完成后将所有没有引用的对象进行清除
    * 由于标记需要停止程序，当对象特别多时，标记和清除过程比较耗时，需要几百毫秒
  * 三色标记法：逻辑是分为白色区（未搜索），灰色区（正搜索），黑色区（已搜索），灰色区内容时子引用没有进行搜索，黑色区表示子引用存在
  * 分代收集，一般情况都有三代，例如java中新生代，老年代，永久带，当新生代中带有阈值会把对象放入到老年代，老年代内容达到阈值放入到永久代

### 二、Golang中的GC

***

* Go语言中采用stop the world 方式
* Golang 1.5开始i支持并发（concurrent）收集，从1.8版本吧STW时间优化到啦100微秒，通常只需要10微秒，1.10版本再次优化减少GC对CPU占用
* Go语言中GC时自动运行对，在下面情况会触发GC
  * 当需要申请内测时，发现GC是常常GC两倍时会触发
  * 每两分钟自动运行一次GC
* GC调优
  * 小对象复用，局部表了尽量少声明，多个小对象可以放入到结构体，方便GC扫描
  * 少用string的“+”
* 在runtime包下mgc.go中明确的说明了Golang的GC解释

